---
title: Redact
description: Remove PII, PHI, and secrets from text automatically
---

# Redact

The `redact()` method removes sensitive or dangerous content from text. It supports two modes: placeholder mode (default) and rewrite mode.

## Basic Usage

```typescript
import { createClient } from "@superagent-ai/safety-agent";

const client = createClient();

const result = await client.redact({
  input: "My email is john@example.com and SSN is 123-45-6789",
  model: "openai/gpt-4o-mini"
});

console.log(result.redacted);
// "My email is <EMAIL_REDACTED> and SSN is <SSN_REDACTED>"
```

## Options

| Option | Type | Required | Default | Description |
|--------|------|----------|---------|-------------|
| `input` | `string` | Yes | - | The input text to redact |
| `model` | `string` | Yes | - | Model in `provider/model` format (e.g., `openai/gpt-4o-mini`) |
| `entities` | `string[]` | No | Default PII entities | List of entity types to redact (e.g., `["emails", "phone numbers"]`) |
| `rewrite` | `boolean` | No | `false` | When `true`, rewrites text contextually instead of using placeholders |

## Response

| Field | Type | Description |
|-------|------|-------------|
| `redacted` | `string` | The sanitized text with redactions applied |
| `findings` | `string[]` | Descriptions of what was redacted |
| `usage` | `TokenUsage` | Token usage information |

## Placeholder Mode (Default)

Replaces sensitive content with descriptive placeholders:

```typescript
const result = await client.redact({
  input: "My email is john@example.com and SSN is 123-45-6789",
  model: "openai/gpt-4o-mini"
});

console.log(result.redacted);
// "My email is <EMAIL_REDACTED> and SSN is <SSN_REDACTED>"
```

## Rewrite Mode

Rewrites text contextually to remove sensitive information while preserving meaning:

```typescript
const result = await client.redact({
  input: "My email is john@example.com and SSN is 123-45-6789",
  model: "openai/gpt-4o-mini",
  rewrite: true
});

console.log(result.redacted);
// "My email is on file and my social security number has been provided"
```

## Custom Entities

Specify which entity types to redact:

```typescript
const result = await client.redact({
  input: "Contact john@example.com or call 555-123-4567",
  model: "openai/gpt-4o-mini",
  entities: ["email addresses"] // Only redact emails, keep phone numbers
});

console.log(result.redacted);
// "Contact <EMAIL_REDACTED> or call 555-123-4567"
```

### Default Entities

When `entities` is not specified, the following are redacted by default:

- Social Security Numbers (SSNs)
- Driver's License Numbers
- Passport Numbers
- API Keys
- Secrets and Passwords
- Names
- Addresses
- Phone Numbers
- Emails
- Credit Card Numbers

## Token Usage

The response includes token usage information:

```typescript
const result = await client.redact({
  input: "Contact john@example.com",
  model: "openai/gpt-4o-mini"
});

console.log(`Used ${result.usage.totalTokens} tokens`);
console.log(`Prompt: ${result.usage.promptTokens}, Completion: ${result.usage.completionTokens}`);
```

| Field | Type | Description |
|-------|------|-------------|
| `promptTokens` | `number` | Number of tokens in the prompt/input |
| `completionTokens` | `number` | Number of tokens in the completion/output |
| `totalTokens` | `number` | Total tokens used (promptTokens + completionTokens) |

